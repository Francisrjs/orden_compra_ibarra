<p-toast></p-toast>

<p-table [value]="items" dataKey="id" [tableStyle]="{ 'min-width': '40rem' }">
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="id" class="small-col">
        Id <p-sortIcon field="id"></p-sortIcon>
      </th>
      <th pSortableColumn="producto.nombre">
        Producto <p-sortIcon field="producto.nombre"></p-sortIcon>
      </th>
      <th pSortableColumn="cantidad" class="small-col">
        Cantidad <p-sortIcon field="cantidad"></p-sortIcon>
      </th>
      <th pSortableColumn="unidad_medida.nombre">
        Medida <p-sortIcon field="unidad_medida.nombre"></p-sortIcon>
      </th>
      <th pSortableColumn="estado" class="small-col">
        Estado <p-sortIcon field="estado"></p-sortIcon>
      </th>

      <th class="actions-col">Acción</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-item>
    <tr>
      <td>{{ item.id }}</td>
      <td>{{ item.producto?.nombre }}</td>
      <td>{{ item.cantidad }}</td>
      <td>{{ item.unidad_medida?.nombre }}</td>
      <td>
        <p-tag
          [value]="item.estado"
          [severity]="getStatusSeverity(item.estado)"
        ></p-tag>
      </td>

      <!-- Si quieres mostrar un input o icono para cambiar cantidad aceptada, aquí -->

      <!-- Botón PLUS que emite el item -->
      <td class="actions-col">
        <!-- <button
          pButton
          type="button"
          icon="pi pi-plus"
          class="p-button-rounded p-button-success"
         
          title="Agregar / seleccionar"
        ></button> -->
        <p-button
          icon="pi pi-plus"
          (click)="onAdd(item)"
          styleClass="p-button-rounded p-button-outlined"
          [rounded]="true"
          [text]="true"
          severity="success"
        ></p-button>
      </td>
    </tr>
  </ng-template>

  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="7">No hay items pendientes.</td>
    </tr>
  </ng-template>
</p-table>
