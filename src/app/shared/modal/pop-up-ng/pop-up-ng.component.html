<p-dialog
  [modal]="true"
  [closable]="false"
  [style]="{ width: '450px' }"
  [contentStyle]="{ 'text-align': 'center', 'padding': '2rem' }"
  [(visible)]="show"
  (onHide)="cancel()"
  [position]="'center'"
>
  <!-- Header personalizado -->
  <ng-template pTemplate="header">
    <div class="flex align-items-center gap-2">
      <span class="font-bold text-900">{{ titleModal }}</span>
    </div>
  </ng-template>

  <!-- Contenido principal -->
  <div #popupContainer class="p-fluid text-center w-100" tabindex="0"
    (keydown.enter)="accept()"
    (keydown.escape)="cancel()"
  >
    <!-- Icono principal centrado -->
    <div class="mb-3">
      <i [class]="popupIcon + ' ' + popupIconColor" style="font-size: 3rem;"></i>
    </div>
    
    <!-- Mensaje -->
    <p class="mb-3 text-600">{{ description }}</p>
    
    <!-- Input Number (legacy - mantener compatibilidad) -->
    <p-inputNumber
      *ngIf="includeInput && inputType === 'none'"
      [(ngModel)]="inputNumberValue"
      [min]="numberMin"
      [max]="numberMax"
      [mode]="'decimal'"
      [minFractionDigits]="0"
      [maxFractionDigits]="2"
      [placeholder]="numberPlaceholder"
      [prefix]="prefix"
      inputId="precioInput"
      class="mb-3"
      (keydown.enter)="onEnterPrecio()"
    >
    </p-inputNumber>
    
    <!-- Input Number (nuevo tipo) -->
    <p-inputNumber
      *ngIf="inputType === 'number'"
      [(ngModel)]="inputNumberValue"
      [min]="numberMin"
      [max]="numberMax"
      [mode]="'decimal'"
      [minFractionDigits]="0"
      [maxFractionDigits]="2"
      [placeholder]="numberPlaceholder"
      [prefix]="prefix"
      inputId="numberInput"
      class="mb-3"
      (keydown.enter)="onEnterPrecio()"
    >
    </p-inputNumber>
    
    <!-- Input Date -->
    <app-input-date
      *ngIf="inputType === 'date'"
      [(ngModel)]="inputDateValue"
      id="dateInput"
      [min]="minDate"
      [max]="maxDate"
      class="mb-3"
    ></app-input-date>
    
    <!-- Dropdown -->
    <p-dropdown
      *ngIf="inputType === 'dropdown'"
      [(ngModel)]="inputDropdownValue"
      [options]="dropdownOptions"
      [optionLabel]="dropdownOptionLabel"
      [optionValue]="dropdownOptionValue"
      [placeholder]="dropdownPlaceholder"
      class="mb-3"
      inputId="dropdownInput"
      [style]="{'width': '100%, height'}"
    ></p-dropdown>
  </div>

  <!-- Footer personalizado -->
  <ng-template pTemplate="footer">
    <div class="flex justify-content-center gap-2">
      <button
        pButton
        type="button"
        label="Cancelar"
        icon="pi pi-times"
        class="p-button-text p-button-secondary"
        (click)="cancel()"
      ></button>
      <button
        pButton
        type="button"
        label="Aceptar"
        icon="pi pi-check"
        class="p-button-success"
        (click)="accept()"
      ></button>
    </div>
  </ng-template>
</p-dialog>